#!/bin/bash        
     
#clear
echo
echo "Be sure that config/config.yml file contains good translation file"
echo 



if [[ "$1" =~ \@ ]] || [[ "$1" =~ features ]]; then
	echo "$0 $1 $2" 
	echo	
	echo "kill firefox if its being run"                             
	killall -9 firefox-bin             
	
	echo "Starting the test.."
	if [[ "$1" =~ \@ ]]; then
	   cucumber -t $1 --guess -f html > $2.html
	else                                       
		cucumber $1 --guess -f html > $2.html
	fi
	./bin/run_after_test $2.html
	echo 
	echo "Finished"
else
	echo "How to run me:"               
	echo ""
	echo "1) using tags: " 
	echo "./WatirCuke -t @tag1,@tag2 output"
	echo "example: ./WatirCuke -t @sc_en sc_en"
	echo ""
	echo "2) without tags: "
	echo "./WatirCuke features/test.feature output" 
	echo "example: ./WatirCuke features/test.feature output"
	echo
fi
	
